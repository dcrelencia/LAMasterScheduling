<!DOCTYPE html>
<html>
<body>
<h2 style="text-align: center;">ORIGINAL LA SCHEDULE PP03</h2>
<script>
//https://stackoverflow.com/questions/61328891/how-to-take-a-tsv-file-and-convert-to-json-in-js
const tsv2arr = (tsv) => {
  const [headers, ...rows] = tsv .trim () .split ('\n') .map (r => r .split ('\t'))
  return rows .reduce ((a, r) => [
    ... a, 
    Object .assign (... (r .map (
      (x, i, _, c = x.trim()) => ({[headers [i].trim()]: isNaN(c) ? c : Number(c)})
    )))
  ], [])
}
const tsv =
`Rank	Name	PhoneNumber	SundayOff	SundayStartTime	MondayOff	MondayStartTime	TuesdayOff	TuesdayStartTime	WednesdayOff	WednesdayStartTime	ThursdayOff	ThursdayStartTime	FridayOff	FridayStartTime	SaturdayOff	SaturdayStartTime
1	Worker A	(888)888-888	N	1330		1430	N	1430	N	1500	N	1330	N	1330	N	1330
2	Worker B	(888)888-889	Y		Y		N	1500	N	1500	N	1430	N	1430	N	1430
3	Worker C	(888)888-890	N	1500		1430	N	1430	N	1500	N	1500	N	1500	N	1500	
`

/*
var totalPayPeriodWorkDays = []; 
for(var i = 0; i < tsv2arr(tsv).length; i++)
{
    if(tsv2arr(tsv).Name !== null)
    totalPayPeriodWorkDays.push(i);
}
console.log(totalPayPeriodWorkDays.length);
*/

const daysOfTheWeek = ["SUNDAY", "MONDAY", "TUESDAY", "WEDNESDAY", "THURSDAY", "FRIDAY", "SATURDAY"];
var counter = 0;
document.write("Notes:",  "<br>");
document.write("Copy the desired data below and paste the data in Excel. The data will automatically split into different cells.", "<br>", "<br>");
document.write(
                "<table width=\"100%\" border-collapse=\"collapse\">", "<tr>",
                "<td text-align=\"100px\">", "Name", "</td>",
                "<td width=\"100px\">", "Sun", "</td>",
                "<td width=\"100px\">", "Mon", "</td>",
                "<td width=\"100px\">", "Tue", "</td>",
                "<td width=\"100px\">", "Wed", "</td>",
                "<td width=\"100px\">", "Thur", "</td>",
                "<td width=\"100px\">", "Fri", "</td>",
                "<td width=\"100px\">", "Sat", "</td>",
                "</tr>", "</table>"
            );   
                
              for(var i = 0; i < tsv2arr(tsv).length; i++){
                counter = 0;
                document.write(
                    "<table width=\"100%\" border-collapse=\"collapse\">", "<tr>",                                 
                    "<td width=\"100px\">", tsv2arr(tsv)[i].Name, "</td>"
                );
                if(tsv2arr(tsv)[i].SundayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write( "<td width=\"100px\">", tsv2arr(tsv)[i].SundayStartTime, "</td>",);
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].SundayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].MondayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].MondayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].MondayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].TuesdayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].TuesdayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].TuesdayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].WednesdayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].WednesdayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].WednesdayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].ThurdayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].ThursdayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].ThursdayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].FridayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].FridayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].FridayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }

                if(tsv2arr(tsv)[i].SaturdayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].SaturdayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].SaturdayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }
                if(tsv2arr(tsv)[i].SaturdayOff === "N" && counter !== 4){
                    if(Math.floor(Math.random()*2+1) === 1){
                        counter++;
                        document.write("<td width=\"100px\">", tsv2arr(tsv)[i].SaturdayStartTime, "</td>", );
                    }else{
                        document.write("<td width=\"100px\">", " ", "</td>", );
                    }
                }else if(tsv2arr(tsv)[i].SaturdayOff === "Y"){
                    document.write("<td width=\"100px\">", " ", "</td>",);
                }
                document.write("</tr>", "</table>");
            }
</script>
</body>
</html>
